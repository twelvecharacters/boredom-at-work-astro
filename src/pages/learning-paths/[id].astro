---
import DocLayout from '../../layouts/DocLayout.astro';
import Roadmap from '../../components/Roadmap.astro';
import { LEARNING_PATHS } from '../../data/learning-paths';

export function getStaticPaths() {
  return LEARNING_PATHS.map(path => ({
    params: { id: path.id },
    props: { path },
  }));
}

const { path } = Astro.props;
---

<DocLayout title={path.title} pathTitle={path.title}>
  <div slot="sidebar">
    {path.steps.map((step, index) => (
      <a 
        href={`/learning-paths/${path.id}/${step.slug}/`} 
        class="doc-nav-item"
      >
        {index + 1}. {step.title}
      </a>
    ))}
  </div>

  <p class="text-lg text-gray-600 mb-10 leading-relaxed">
    {path.description}
  </p>

  <Roadmap pathId={path.id} />

  <div class="bg-gray-100 border border-gray-200 p-8 rounded-xl mt-12 flex items-center justify-between">
    <div>
      <h3 class="text-gray-900 text-lg font-bold mb-1">Initialization Required</h3>
      <p class="text-gray-500 text-sm mb-0">Proceed to first documentation module: <strong>{path.steps[0].title}</strong></p>
    </div>
    <a href={`/learning-paths/${path.id}/${path.steps[0].slug}/`} class="bg-gray-900 text-white px-6 py-3 rounded-lg font-bold hover:bg-gray-800 transition-colors text-sm uppercase tracking-wider">
      Begin Module 1.0
    </a>
  </div>
</DocLayout>
