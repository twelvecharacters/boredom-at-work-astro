---
import DocLayout from '../../layouts/DocLayout.astro';
import Roadmap from '../../components/Roadmap.astro';
import { LEARNING_PATHS } from '../../data/learning-paths';

export function getStaticPaths() {
  return LEARNING_PATHS.map(path => ({
    params: { id: path.id },
    props: { path },
  }));
}

const { path } = Astro.props;
---

<DocLayout title={path.title} pathTitle={path.title}>
  <div slot="sidebar">
    {path.steps.map((step, index) => (
      <a 
        href={`/learning-paths/${path.id}/${step.slug}/`} 
        class="doc-nav-item"
      >
        {index + 1}. {step.title}
      </a>
    ))}
  </div>

  <p class="text-xl text-gray-600 mb-10">
    {path.description}
  </p>

  <Roadmap pathId={path.id} />

  <div class="bg-blue-600 p-8 rounded-2xl text-white mt-12 flex items-center justify-between shadow-xl shadow-blue-200">
    <div>
      <h3 class="text-white text-xl font-bold mb-1">Ready to start?</h3>
      <p class="text-blue-100 mb-0">Begin with the first module: <strong>{path.steps[0].title}</strong></p>
    </div>
    <a href={`/learning-paths/${path.id}/${path.steps[0].slug}/`} class="bg-white text-blue-600 px-6 py-3 rounded-xl font-bold hover:bg-blue-50 transition-colors">
      Start First Step â†’
    </a>
  </div>
</DocLayout>
