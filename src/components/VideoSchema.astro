---
interface Props {
  video: {
    youtubeId: string;
    title: string;
    description: string;
    duration?: string;
  };
  publishDate: Date;
}

const { video, publishDate } = Astro.props;

const schemaData = {
  "@context": "https://schema.org",
  "@type": "VideoObject",
  "name": video.title,
  "description": video.description,
  "thumbnailUrl": `https://i.ytimg.com/vi/${video.youtubeId}/maxresdefault.jpg`,
  "uploadDate": publishDate.toISOString().split('T')[0],
  "contentUrl": `https://www.youtube.com/watch?v=${video.youtubeId}`,
  "embedUrl": `https://www.youtube.com/embed/${video.youtubeId}`,
  ...(video.duration && { "duration": video.duration }),
};
---

<script type="application/ld+json" set:html={JSON.stringify(schemaData)} />
