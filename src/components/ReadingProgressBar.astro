---
---

<div id="reading-progress-container" style="position: fixed; top: 0; left: 0; width: 100%; height: 4px; z-index: 100000; pointer-events: none; background: rgba(139, 92, 246, 0.1);">
  <div id="reading-progress-bar" style="height: 100%; width: 0%; background-color: #8b5cf6; box-shadow: 0 0 10px rgba(139, 92, 246, 0.5); transition: width 0.1s linear;"></div>
</div>

<script>
  function updateProgress() {
    const progressBar = document.getElementById('reading-progress-bar');
    if (!progressBar) return;

    const scrollTop = window.scrollY || document.documentElement.scrollTop || document.body.scrollTop || 0;
    const scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight || 0;
    const clientHeight = window.innerHeight || document.documentElement.clientHeight || 0;
    
    const height = scrollHeight - clientHeight;
    const percentage = height > 0 ? (scrollTop / height) * 100 : 0;
    const clampedPercentage = Math.min(Math.max(percentage, 0), 100);

    progressBar.style.width = clampedPercentage + '%';
  }

  window.addEventListener('scroll', updateProgress, { passive: true });
  window.addEventListener('resize', updateProgress, { passive: true });
  document.addEventListener('astro:page-load', updateProgress);
  document.addEventListener('astro:after-swap', updateProgress);
  
  updateProgress();
</script>
